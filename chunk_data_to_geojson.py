import numpy as np
from skimage import measure
from shapely.geometry import Polygon, mapping
import json

# This script will take chunk data and generate geoJson polygon from them, highlighting biomes
example_chunk = {"chunk_index":225031,"chunk_x":30,"chunk_z":225,"dimension":1,"biomes":[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,10,10,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,10,10,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546,1546],"biome_density":[128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,1152,1152,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,1152,1152,1152,2176,2176,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,2176,2176,2176,2176,3200,3200,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,2176,3200,3200,3200,3200,4480,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,1152,1152,2176,3200,4480,4480,4480,4480,5504,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,1152,1152,1152,2176,2176,2176,3200,4480,5504,5504,5504,5504,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,2176,2176,2176,2176,3200,3200,3200,4480,5504,6528,6528,6528,6528,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,1152,2176,3200,3200,3200,3200,4480,4480,4480,5504,6528,7552,7552,7552,128,128,128,128,128,128,128,128,128,128,128,128,1152,1152,1152,1152,1152,1152,2176,3200,4480,4480,4480,4480,5504,5504,5504,6528,7552,8832,8832,8832,128,128,128,128,128,128,128,1152,1152,1152,1152,1152,1152,2176,2176,2176,2176,2176,2176,3200,4480,5504,5504,5504,5504,6528,6528,6528,7552,8832,9856,9856,128,128,128,128,128,128,1152,2176,2176,2176,2176,2176,2176,3200,3200,3200,3200,3200,3200,4480,5504,6528,6528,6528,6528,7552,7552,7552,8832,9856,10880,10880,128,128,128,128,128,128,1152,2176,3200,3200,3200,3200,3200,3200,4480,4480,4480,4480,4480,4480,5504,6528,7552,7552,7552,7552,8832,8832,8832,9856,10880,11904,128,128,1152,1152,1152,1152,2176,3200,4480,4480,4480,4480,4480,4480,5504,5504,5504,5504,5504,5504,6528,7552,8832,8832,8832,8832,9856,9856,9856,10880,11904,13184,1152,1152,1152,2176,2176,2176,2176,3200,4480,5504,5504,5504,5504,5504,5504,6528,6528,6528,6528,6528,6528,7552,8832,9856,9856,9856,9856,10880,10880,10880,11904,13184,2176,2176,2176,3200,3200,3200,3200,4480,5504,6528,6528,6528,6528,6528,6528,7552,7552,7552,7552,7552,7552,8832,9856,10880,10880,10880,10880,11904,11904,11904,13184,14208,3200,3200,3200,3200,4480,4480,4480,4480,5504,6528,7552,7552,7552,7552,7552,7552,8832,8832,8832,8832,8832,8832,9856,10880,11904,11904,11904,11904,13184,13184,13184,14208,4480,4480,4480,4480,5504,5504,5504,5504,6528,7552,8832,8832,8832,8832,8832,8832,9856,9856,9856,9856,9856,9856,10880,11904,13184,13184,13184,13184,14208,14208,14208,15232,5504,5504,5504,5504,5504,6528,6528,6528,6528,7552,8832,9856,9856,9856,9856,9856,9856,10880,10880,10880,10880,10880,10880,11904,13184,14208,14208,14208,14208,15232,15232,15232,6528,6528,6528,6528,6528,7552,7552,7552,7552,8832,9856,10880,10880,10880,10880,10880,10880,11904,11904,11904,11904,11904,11904,13184,14208,15232,15232,15232,15232,16512,16512,16512,7552,7552,7552,7552,7552,7552,8832,8832,8832,8832,9856,10880,11904,11904,11904,11904,11904,11904,13184,13184,13184,13184,13184,13184,14208,15232,16512,16512,16512,16512,17536,17536,8832,8832,8832,8832,8832,8832,9856,9856,9856,9856,10880,11904,13184,13184,13184,13184,13184,13184,14208,14208,14208,14208,14208,14208,15232,16512,17536,17536,17536,17536,18560,18560,8832,9856,9856,9856,9856,9856,9856,10880,10880,10880,10880,11904,13184,14208,14208,14208,14208,14208,14208,15232,15232,15232,15232,15232,15232,16512,17536,18560,18560,18560,18560,19584,9856,10880,10880,10880,10880,10880,10880,11904,11904,11904,11904,13184,14208,15232,15232,15232,15232,15232,15232,16512,16512,16512,16512,16512,16512,17536,18560,19584,19584,19584,19584,20864,9856,10880,11904,11904,11904,11904,11904,11904,13184,13184,13184,13184,14208,15232,16512,16512,16512,16512,16512,16512,17536,17536,17536,17536,17536,17536,18560,19584,20864,20864,20864,20864,10880,11904,13184,13184,13184,13184,13184,13184,14208,14208,14208,14208,15232,16512,17536,17536,17536,17536,17536,17536,18560,18560,18560,18560,18560,18560,19584,20864,21888,21888,21888,21888,10880,11904,13184,14208,14208,14208,14208,14208,14208,15232,15232,15232,15232,16512,17536,18560,18560,18560,18560,18560,18560,19584,19584,19584,19584,19584,19584,20864,21888,22912,22912,22912,11904,13184,14208,15232,15232,15232,15232,15232,15232,16512,16512,16512,16512,17536,18560,19584,19584,19584,19584,19584,19584,20864,20864,20864,20864,20864,20864,21888,22912,23936,23936,23936,13184,13184,14208,15232,16512,16512,16512,16512,16512,16512,17536,17536,17536,17536,18560,19584,20864,20864,20864,20864,20864,20864,21888,21888,21888,21888,21888,21888,22912,23936,25216,25216,14208,14208,15232,16512,17536,17536,17536,17536,17536,17536,18560,18560,18560,18560,19584,20864,21888,21888,21888,21888,21888,21888,22912,22912,22912,22912,22912,22912,23936,25216,26240,26240,15232,15232,15232,16512,17536,18560,18560,18560,18560,18560,18560,19584,19584,19584,19584,20864,21888,22912,22912,22912,22912,22912,22912,23936,23936,23936,23936,23936,23936,25216,26240,27264,16512,16512,16512,17536,18560,19584,19584,19584,19584,19584,19584,20864,20864,20864,20864,21888,22912,23936,23936,23936,23936,23936,23936,25216,25216,25216,25216,25216,25216,26240,27264,28288],"elevations":[8,8,8,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,4,4,3,2,2,1,0,0,0,0,0,0,0,0,8,8,7,7,7,7,7,7,7,6,6,6,5,5,5,5,5,4,4,3,3,2,1,1,0,0,0,0,0,0,0,0,8,8,8,8,7,7,7,7,7,7,6,6,5,5,4,4,4,4,4,3,3,2,2,1,0,0,0,0,0,0,0,0,8,8,8,8,7,7,7,7,7,6,6,5,5,4,4,4,4,4,4,3,3,2,1,1,1,1,0,0,0,0,0,0,8,8,8,8,8,7,7,7,7,7,6,5,5,4,4,4,4,4,4,3,3,2,2,1,1,1,1,1,0,0,0,0,8,8,8,8,8,8,7,7,7,6,6,5,4,4,4,4,3,3,3,3,3,3,2,2,1,1,1,1,1,1,1,1,9,9,8,8,8,8,8,8,7,7,6,6,5,4,4,4,4,4,4,3,3,3,3,3,2,2,2,1,1,1,1,2,8,8,8,8,8,8,8,8,7,7,6,5,5,4,4,4,4,4,4,4,4,4,3,3,3,3,2,2,2,2,2,3,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,8,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,4,4,4,4,4,5,5,5,5,4,4,4,4,4,4,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,5,5,4,5,5,5,6,6,6,6,6,6,5,6,6,9,9,8,8,8,8,8,8,7,7,6,6,6,6,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,9,9,9,8,8,8,8,8,7,7,7,6,6,6,6,5,5,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,10,10,9,9,9,9,9,8,8,8,7,7,7,6,6,6,5,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,10,10,9,9,9,9,9,9,8,8,8,7,7,7,6,6,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,7,11,10,10,10,10,10,9,9,9,9,9,8,8,7,7,6,6,5,5,5,5,6,6,7,7,7,7,7,7,7,8,8,11,10,10,10,10,10,10,10,10,9,9,8,8,7,7,6,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,11,11,11,11,11,10,10,10,10,10,9,9,8,8,7,7,6,6,6,6,6,7,7,7,7,7,7,7,8,8,8,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,7,7,7,6,7,7,7,7,7,7,7,7,7,8,8,9,9,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,8,7,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,10,10,10,10,11,11,11,11,11,10,10,10,9,9,9,8,8,8,8,8,8,8,9,9,9,9,9,8,8,9,9,9,10,10,10,10,11,11,11,11,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,10,10,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,9,9,9,9,9,9,9,10,10,10,10,11,11,11,10,10,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,10,10,10,9,10,10,10,11,10,10,9,9,9,9,9,9,10,10,10,11,11,11,11,10,10,10,10,10,9,9,9,9,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,10,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,11,11,9,10,10,10,10,10,10,9,9,9,9,9,9,10,10,11,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,9,10,10,10,10,10,9,9,9,9,9,9,10,10,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,9,9,9,10,10,10,9,9,9,9,9,10,10,10,11,11,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,12,9,9,9,9,9,9,9,9,10,10,10,10,10,11,11,12,12,12,12,12,12,13,13,14,14,14,14,13,13,13,13,13],"water_levels":[25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],"water_body_types":[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],"zoning_types":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"original_elevations":[8,8,8,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,4,4,3,2,2,1,0,0,0,0,0,0,0,0,8,8,7,7,7,7,7,7,7,6,6,6,5,5,5,5,5,4,4,3,3,2,1,1,0,0,0,0,0,0,0,0,8,8,8,8,7,7,7,7,7,7,6,6,5,5,4,4,4,4,4,3,3,2,2,1,0,0,0,0,0,0,0,0,8,8,8,8,7,7,7,7,7,6,6,5,5,4,4,4,4,4,4,3,3,2,1,1,1,1,0,0,0,0,0,0,8,8,8,8,8,7,7,7,7,7,6,5,5,4,4,4,4,4,4,3,3,2,2,1,1,1,1,1,0,0,0,0,8,8,8,8,8,8,7,7,7,6,6,5,4,4,4,4,3,3,3,3,3,3,2,2,1,1,1,1,1,1,1,1,9,9,8,8,8,8,8,8,7,7,6,6,5,4,4,4,4,4,4,3,3,3,3,3,2,2,2,1,1,1,1,2,8,8,8,8,8,8,8,8,7,7,6,5,5,4,4,4,4,4,4,4,4,4,3,3,3,3,2,2,2,2,2,3,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,8,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,4,4,4,4,4,5,5,5,5,4,4,4,4,4,4,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,9,8,8,8,8,8,8,8,7,7,6,6,5,5,5,5,5,5,5,4,5,5,5,6,6,6,6,6,6,5,6,6,9,9,8,8,8,8,8,8,7,7,6,6,6,6,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,9,9,9,8,8,8,8,8,7,7,7,6,6,6,6,5,5,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,10,10,9,9,9,9,9,8,8,8,7,7,7,6,6,6,5,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,10,10,9,9,9,9,9,9,8,8,8,7,7,7,6,6,5,5,5,5,5,6,6,7,7,7,7,7,7,7,7,7,11,10,10,10,10,10,9,9,9,9,9,8,8,7,7,6,6,5,5,5,5,6,6,7,7,7,7,7,7,7,8,8,11,10,10,10,10,10,10,10,10,9,9,8,8,7,7,6,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,11,11,11,11,11,10,10,10,10,10,9,9,8,8,7,7,6,6,6,6,6,7,7,7,7,7,7,7,8,8,8,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,7,7,7,6,7,7,7,7,7,7,7,7,7,8,8,9,9,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,8,7,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,11,11,11,11,11,11,11,10,10,10,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,10,10,10,10,11,11,11,11,11,10,10,10,9,9,9,8,8,8,8,8,8,8,9,9,9,9,9,8,8,9,9,9,10,10,10,10,11,11,11,11,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,10,10,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,9,9,9,9,9,9,9,10,10,10,10,11,11,11,10,10,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,10,10,10,9,10,10,10,11,10,10,9,9,9,9,9,9,10,10,10,11,11,11,11,10,10,10,10,10,9,9,9,9,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,10,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,11,11,9,10,10,10,10,10,10,9,9,9,9,9,9,10,10,11,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,9,10,10,10,10,10,9,9,9,9,9,9,10,10,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,9,9,9,10,10,10,9,9,9,9,9,10,10,10,11,11,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,12,9,9,9,9,9,9,9,9,10,10,10,10,10,11,11,12,12,12,12,12,12,13,13,14,14,14,14,13,13,13,13,13]}
chunk_32_32 = [example_chunk['biomes'][i*32:(i+1)*32] for i in range(32)]
biome_data = np.array(chunk_32_32)

# We need padding or the script will not consider outsides edge as a new zone
padded = np.pad(biome_data, pad_width=1, mode='constant', constant_values=-1)

geojson_features = []


for biome_type in np.unique(padded):
    mask = (padded == biome_type)
    labeled, num = measure.label(mask, connectivity=1, return_num=True)
    contours = measure.find_contours(mask, level=0.5)

    for region_label in range(1, num + 1):
        region_mask = (labeled == region_label)
        contours = measure.find_contours(region_mask, level=0.5)

        for contour in contours:
            coords = [(float(x)-0.6, float(y)-0.6) for y, x in contour]

            polygon = Polygon(coords)

            feature = {
                "type": "Feature",
                "properties": {"biome": str(biome_type)},
                "geometry": mapping(polygon)
            }

            geojson_features.append(feature)

with open("biomes.geojson", "w") as f:
    json.dump(geojson_features, f)